services:
  gortfolio:
    container_name: gortfolio
    volumes:
      - .:/project
    working_dir: /project
    tty: true
    build: "./"
    ports:
      - "8080:8080"
    command: sh -c "go mod tidy && air -c .air.toml"

  db:
    container_name: gortfolio_db
    image: mysql:8.0
    platform: linux/arm64
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: gortfolio
      MYSQL_USER: gortfolio
      MYSQL_PASSWORD: gortfolio
      MYSQL_HOST: gortfolio
    ports:
      - "3306:3306"
    volumes:
      - ./mysql/ep:/docker-entrypoint-initdb.d
      - ./mysql/data:/var/lib/mysql
      - ./mysql/my.conf:/etc/mysql/conf.d/my.conf
